---
layout: single
title:  "파이썬 모듈과 패키지"
category: Python
tags: [Python]
date: 2022-10-26
comments : true
---

오늘은 파이썬으로 프로젝트를 구성하면서 모듈과 패키지에 대해 정리하는 포스팅을 해 보려 합니다.

평소에는 업무에서 자동화가 필요할 때 툴을 만드는 수준으로 파이썬을 사용하고 있어 스크립트 처럼 써와서, 프로젝트 구성에 대한 개념이 딱히 필요하지 않았습니다. 하지만 이번에 구현했던 내용은 단순 스크립트 보단 더 큰 개념의 프로젝트를 구성해야 했습니다.

구성할 때 필요한 이론, 그리고 구현하면서 어떤 문제가 있었는지, 문제는 어떻게 해결했는지 적어 보겠습니다.

## 함수, 모듈, 패키지
### 함수
우리가 아는 그 함수입니다.
```python
def f(x):
    return x
```

## 모듈
모듈은 함수를 하나의 파일에 묶어놓은 단위를 의미합니다.
해당 모듈의 정의를 다른 모듈이나 메인에서 사용할 수 있게 import가 가능합니다.
아래와 같이 구성되며 예시 모듈은 1개의 함수와 1개의 변수를 가지고 있습니다.

#### module.py
```python
a = 0
def f(x):
    return x
```


## 트러블 슈팅
### C++에서와 다르게 모듈의 폴더 기준 상대 경로가 안 된다.
C++을 사용하여 특정 기능을 구현할 경우, 구현하는 파일 기준의 상대경로 or 특정 폴더를 기준으로 한 절대 경로, 둘 다 사용할 수 있습니다. 하지만 파이썬은 실행하는 모듈을 기준으로한 상대경로만 유효합니다.

결국 Package로 나눴다 하더라도 Package에서 import를 할려면 main 경로 기준으로 import를 시켜야 합니다. 다른 코드를 찾아봐도 이게 정석인 것 같긴 합니다.

제가 원했던 폴더 구조는 아래와 같습니다. 

```
📦Project
 ┣ 📂PackageA
 ┃ ┣ 📜__init__.py
 ┃ ┣ 📜moduleA.py
 ┃ ┗ 📜moduleB.py
 ┣ 📂PackageB
 ┃ ┣ 📜__init__.py
 ┃ ┣ 📜moduleC.py
 ┃ ┗ 📜moduleD.py
 ┗ 📜main.py
 ```

하지만 제가 구성했던 Package 중 하나는 AutoGenerated된 코드라 수정을 왠만하면 하지 않는 것이 좋은 상황이라, **코드를 바꾸지 않으면서** 해당 폴더 구조를 유지할 방법이 필요했습니다.

여러 가지 방법이 있으나, 저는 각 패키지 별 `__init__.py`에 해당 패키지의 절대 경로를 모듈로 불러울 수 있게 처리를 하였습니다.