---
title: "Compile 과정"
tags: [C++]
permalink: "/C++/"
categories:
  - C++
date: 2022-08-07
---

# 컴파일 과정
![alt](../assets/images/compile.png)

컴파일 과정은 크게 4가지로 구성된다.
* 전처리기
* 컴파일러
* 어셈블러
* 링커

# 전처리기 (Pre-processing)
* 프로그램을 컴파일 할 때 컴파일 직전에 실행되는 별도의 프로그램입니다.
* 전처리 과정이 적용된 후 `*.i` 파일이 결과물로 생성됩니다.
* `*.i` 는 임시 파일이며, 컴파일 후 사라집니다.

## 전처리기가 하는 일
1. 주석 제거
2. 문법적으로 검토
3. 전처리기 키워드 처리
    * #define
        * 조건부 처리기
            ```C++
            #ifdef _DEBUG
            #endif
            ```
        * 매크로 상수
            ```C++
            #define PI 3.141592
            ```
    * include
        * 위와 같이 선언하게 되면, 해당 헤더 내용을 모조리 복사해와서 include에 포함하겠다는 의미.
            ```C++
            #include <헤더>
            ```

# 컴파일러
* 고수준 언어를 저수준 언어로 변환하는 역할을 수행합니다.
* `*.s` 파일이 생성되며, 결과물은 어셈블리 언어로 변경되어 있습니다.
* 위 전처리기 결과물과 유사하게 임시파일이며 컴파일 후에 사라집니다. 단 빌드 설정 등으로 파일을 남길 수 있습니다.

# 어셈블러
* 어셈블리 언어를 완전한 기계어로 바꾸어 주는 역할을 수행합니다.
* 기계어는 인간이 읽을 수 없습니다.
* `*.s` 파일이 `.o` 로 변환됩니다.

# 링커
* 여러개의 `.o` 파일을 하나로 합치거나, 라이브러리들을 합치는 과정입니다.
* `.o` 파일을 통해 실행 파일 (Windows 환경에서는 .exe) 을 생성합니다.